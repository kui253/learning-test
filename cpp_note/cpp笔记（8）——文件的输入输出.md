# è¾“å…¥è¾“å‡ºæµ

## åˆ©ç”¨coutè¾“å‡º

### ostreamæ–¹æ³•

#### ostream& put (char)

1. è¯´æ˜ï¼šè¿™ä¸ªå°†ä¼šæ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚

   ```C++
   cout.put('w');//å°†æ˜¾ç¤ºw
   cout.put(65);//å°†æ˜¾ç¤ºASCIIç 65å¯¹åº”çš„å­—ç¬¦
   cout.put(65.3);//å°†æ˜¾ç¤ºASCIIç 65å¯¹åº”çš„å­—ç¬¦
   ```

2. putï¼ˆcharï¼‰æ¥å—ä¸€ä¸ªå‚æ•°ä¸”ä¼šå¼ºåˆ¶è½¬æ¢ä¸ºcharç±»å‹

#### basic_ostream<char T,traits>&ostream write(const char_type* s,streamsize n );

1. è¯´æ˜ä½¿ç”¨coutè°ƒç”¨æ—¶ï¼Œå°†æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²çš„åœ°å€ï¼Œç„¶åæ˜¾ç¤ºå‰nä¸ªå­—ç¬¦

   ```C++
   cout.write("TOMMMA",3);//å°†æ˜¾ç¤ºTOM
   ```

2. å®ƒè¿”å›çš„ä¹Ÿæ—¶coutå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥æ¥ä¸Š<<ä½¿ç”¨

   ```C++
   cout.write(state1,i)<<endl;
   ```

3. å®ƒä¹Ÿå¯ä»¥ç”¨äºå€¼æ•°æ®

4. ```C++
   struct pl;
   cout.write((char*)&pl,sizeof pl);
   ```

   

#### åˆ·æ–°è¾“å‡ºç¼“å†²åŒºï¼ˆflushï¼‰

1. æ§åˆ¶ç¬¦ä¹Ÿæ˜¯å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨flush(cout);æ¥åˆ·æ–°coutç¼“å­˜åŒº
2. ä¹Ÿå¯ä»¥cout<<flush;
3. flushåˆ·æ–°ç¼“å­˜åŒºï¼Œendlåˆ·æ–°ç¼“å­˜åŒºå¹¶ä¸”åœ¨è¡Œå°¾éƒ¨åŠ ä¸Šæ¢è¡Œç¬¦

### ç”¨coutè¿›è¡Œè¾“å‡ºæ ¼å¼åŒ–

#### ä¿®æ”¹æ˜¾ç¤ºçš„è®¡æ•°ç³»ç»Ÿ

```C++
//ä»¥åå…­è¿›åˆ¶æ¥æ˜¾ç¤ºæ•´æ•°å€¼
cout(hex);
cout<<hex;
//ä»¥å…«è¿›åˆ¶æ¥æ˜¾ç¤ºæ•´æ•°å€¼
cout(oct);
cout<<oct;
//ä»¥åè¿›åˆ¶æ¥æ˜¾ç¤ºæ•´æ•°å€¼
cout(dec);
cout<<dec;
```

#### è°ƒæ•´å­—æ®µå®½åº¦

```C++
int width();//è¿”å›å­—æ®µçš„å½“å‰è®¾ç½®
int width(int i );//å°†å­—æ®µå®½åº¦è®¾ç½®ä¸ºiä¸ªç©ºæ ¼ï¼Œå¹¶è¿”å›ä»¥å‰çš„å­—æ®µå®½åº¦ï¼Œä½¿å¾—èƒ½å¤Ÿä¿å­˜ä¹‹å‰çš„æ ¼å¼ï¼Œæ–¹ä¾¿æ¢å¤
//ğŸ”¸width()åªä¼šå½±å“ä¸‹ä¸€æ¬¡çš„è¾“å‡ºæ ¼å¼
//ğŸ”¸é»˜è®¤å³å¯¹é½ï¼Œè¯´æ˜åœ¨æœ€åçš„å‡ ä¸ªä¼šè¢«è¾“å‡ºå­—ç¬¦æ›¿æ¢
```

1. å¡«å……å­—ç¬¦fill(char);

   ```C++
   cout.fill('W');
   //è¿™å°†è®¾ç½®widthçš„å¡«å……å­—ç¬¦ï¼Œå…¶é»˜è®¤ä¸ºç©ºæ ¼ï¼Œå¦‚æœé€šè¿‡fill()æ–¹æ³•ä¿®æ”¹å°±å¯æ˜¯ç”¨Wå¡«å……
   //ä¸€æ—¦ä¿®æ”¹å°±ä¼šä¸€ç›´ç”Ÿæ•ˆï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡è¢«ä¿®æ”¹
   ```

#### è®¾ç½®ç²¾åº¦ä¸æ•°æ®è¾“å‡ºæ ¼å¼

##### cout.precision(int i)

è®¾ç½®æ˜¾ç¤ºå°æ•°åå‡ ä½

##### setfï¼ˆï¼‰

1. fmtflags  setf(fmtflags );

   - ![image-20220226102959051](C:\Users\å¤”whd\AppData\Roaming\Typora\typora-user-images\image-20220226102959051.png)

     

2. fmtflags  setf(fmtflags , fmtflags);

   - ![image-20220226102854285](C:\Users\å¤”whd\AppData\Roaming\Typora\typora-user-images\image-20220226102854285.png)

##### å¤´æ–‡ä»¶iomanip

1. cout<<setfill(char)
   - ç”¨äºå¡«å……setw
2. cout<<setw(int )
3. cout<<setprecision(int)
   - ç”¨äºè®¾ç½®ç²¾åº¦

## ä½¿ç”¨cinè¾“å…¥

### æµçŠ¶æ€

#### ç›¸å…³æˆå‘˜

![image-20220226103045030](C:\Users\å¤”whd\AppData\Roaming\Typora\typora-user-images\image-20220226103045030.png)

![image-20220226103052262](C:\Users\å¤”whd\AppData\Roaming\Typora\typora-user-images\image-20220226103052262.png)

#### è®¾ç½®çŠ¶æ€

1. clear()
   - cin.clear():å°†æ¸…é™¤å…¨éƒ¨ä¸‰ä¸ªçŠ¶æ€ä½ï¼ˆeofbitã€badbitã€failbitï¼‰
   - cin.clear(eofbit):åªä¼šè®²çŠ¶æ€è®¾ç½®ä½eofbitï¼Œå…¶ä»–ä¸¤ä¸ªä¼šè¢«æ¸…é™¤
2. setstate():è¯¥æ–¹æ³•åªå½±å“å…¶å‚æ•°ä¸­å·²è®¾ç½®çš„ä½ï¼Œä¸ä¼šå½±å“å…¶ä»–çš„ä½

#### æµçŠ¶æ€çš„å½±å“

1. åªæœ‰åœ¨æµçŠ¶æ€è‰¯å¥½æ—¶ï¼ˆæ‰€æœ‰ä½éƒ½è¢«æ¸…é™¤ï¼‰çš„æƒ…å†µä¸‹ï¼Œcinæ‰ä¼šè¿”å›true

2. å¦‚æœä¸€æ—¦ç›¸å…³çš„çŠ¶æ€è¢«è®¾ç½®ï¼Œé‚£å°±è¦ç”¨cin.clear()æ¸…é™¤ä¸€ä¸‹æ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨

3. ä»…é€šè¿‡cin.clear()æ˜¯ä¸èƒ½å¤Ÿé‡æ–°è®¾ç½®æµçŠ¶æ€ğŸ”¸å¯¼è‡´è¾“å…¥å¾ªç¯ç»ˆæ­¢çš„ä¸åŒ¹é…è¾“å…¥ä»ç•™åœ¨è¾“å…¥é˜Ÿåˆ—ä¸­ã€‚è§£å†³æ–¹æ¡ˆæ˜¯è®©ç¨‹åºè¯»å–å­—ç¬¦ï¼Œç›´åˆ°è¯»åˆ°ç©ºç™½ä¸ºæ­¢

   ```C++
   while(cin.get()!= '\n'){
   	continue;
   }
   ```

### å…¶ä»–istreamç±»æ–¹æ³•

#### cin.get(void)&&cin.get(char)

|          ç‰¹å¾          | ch  =  cin.get(void) |       cin.get(ch)       |
| :--------------------: | :------------------: | :---------------------: |
|   ä¼ è¾“è¾“å…¥å­—ç¬¦çš„æ–¹æ³•   |  å°†å‡½æ•°è¿”å›èµ‹å€¼ç»™ch  |      èµ‹å€¼ç»™å‚æ•°ch       |
| å­—ç¬¦è¾“å…¥æ—¶å‡½æ•°çš„è¿”å›å€¼ |  å­—ç¬¦ç¼–ç ï¼ˆintå€¼ï¼‰   | æŒ‡å‘istreamçš„å¯¹è±¡çš„å¼•ç”¨ |
| è¾¾åˆ°æ–‡ä»¶å°¾å‡½æ•°çš„è¿”å›å€¼ |         EOF          |       è½¬æ¢ä¸ºfalse       |

#### å­—ç¬¦ä¸²çš„è¾“å…¥ï¼šgetline(),get()&ignore()

##### get()

```C++
istream & get(char* , int, char);//ç¬¬ä¸€ä¸ªæ˜¯å­—ç¬¦ä¸²å‚¨å­˜çš„ä½ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°è¦æ¯”è¯»å–çš„æœ€å¤§å­—ç¬¦æ•°å¤§1ï¼Œç¬¬ä¸‰ä¸ªæ˜¯æŒ‡å®šçš„åˆ†ç•Œç¬¦çš„å­—ç¬¦
istream & get(char*, int);
//get()ä¼šå°†æ¢è¡Œç•™åœ¨è¾“å…¥æµä¸­ï¼Œè¿™æ ·æ¥ä¸‹æ¥é¦–å…ˆçœ‹åˆ°çš„å°†ä¼šæ˜¯æ¢è¡Œç¬¦
```

##### getline()

```C++
istream& getline(char*,int ,char);
istream& getline(char*, int);
//getline()ä¼šä¸¢å¼ƒæœ€åçš„æ¢è¡Œç¬¦ï¼Œä¹Ÿä¼šä¸¢å¼ƒåˆ†ç•Œå­—ç¬¦#
```

##### ignore()

```C++
//å‡½æ•°å°†ä¼šè¯»å–å¹¶ä¸¢å¼ƒç¬¬ä¸€ä¸ªå‚æ•°ä¸ªçš„å­—ç¬¦ï¼ŒçŸ¥é“åˆ°è¾¾ç¬¬ä¸€ä¸ªæˆªè‡³ç¬¦ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå¯ä»¥å¼„å¤§ç‚¹
istream & ignore(int = 1,int = EOF);//ç¬¬ä¸€ä¸ªæ˜¯è¦è¯»å–çš„æœ€å¤§å­—ç¬¦ï¼Œå¦ä¸€ä¸ªæ˜¯è¾“å…¥åˆ†ç•Œå­—ç¬¦
//è¿”å›è°ƒç”¨å¯¹è±¡ï¼Œè¯´æ˜å¯ä»¥é“¾å¼ä½¿ç”¨
```

##### æ„å¤–è¾“å…¥

1. ç©ºè¡Œå¯¼è‡´getï¼ˆï¼‰æ— æ³•æŠ½å–å­—ç¬¦

   ```C++
   //è§£å†³
   char temp[80];
   while(cin.getline(temp,80)&&temp[0] != '\0')
   ```

2. è¯»å–è¶…å‡ºæœ€å¤§çš„èŒƒå›´

   |        æ–¹æ³•         |                             è¡Œä¸º                             |
   | :-----------------: | :----------------------------------------------------------: |
   | getline(char*,int ) | å¦‚æœæ²¡æœ‰è¯»å–ä»»ä½•å­—ç¬¦ï¼ˆä½†æ¢è¡Œç¬¦è¢«è§†ä¸ºè¯»å–äº†ä¸€ä¸ªå­—ç¬¦ï¼‰åˆ™è®¾ç½®ä¸ºfailbit<br />å¦‚æœè¯»å–äº†æœ€å¤§æ•°ç›®çš„å­—ç¬¦ï¼Œä¸”è¡Œä¸­è¿˜æœ‰å…¶ä»–å­—ç¬¦ï¼Œåˆ™è®¾ç½®ä¸ºfailbit |
   |  get(char*, int )   |            å¦‚æœæ²¡æœ‰è¯»å–ä»»ä½•å­—ç¬¦ï¼Œåˆ™è®¾ç½®ä¸ºfailbit             |

#### å…¶ä»–istreamæ–¹æ³•

1. read()å‡½æ•°è¯»å–æŒ‡å®šçš„å­—èŠ‚æ•°ï¼Œå¹¶å°†å…¶å‚¨å­˜åœ¨æŒ‡å®šä½ç½®

   ```C++
   char gross[144];
   cin.read(gross,144);
   //readä¸ä¼šå†è¾“å…¥ååŠ ä¸Šç©ºå­—ç¬¦ï¼Œä¸èƒ½å°†è¾“å…¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå¸¸ç”¨äºæ–‡ä»¶çš„è¯»å…¥
   //è¿”å›ç±»å‹æ˜¯&istream
   ```

2. peek()æŸ¥çœ‹å¹¶è¿”å›ä¸‹ä¸€ä¸ªå­—ç¬¦ä½†æ˜¯ä¸æŠ½å–è¾“å…¥æµä¸­çš„å­—ç¬¦

3. gcountï¼ˆï¼‰è¿”å›æœ€åä¸€ä¸ªéæ ¼å¼åŒ–åŒ–æŠ½å–æ–¹æ³•è¯»å–çš„å­—ç¬¦æ•°

4. putback()å‡½æ•°å°†ä¸€ä¸ªå­—ç¬¦æ’å…¥åˆ°è¾“å…¥å­—ç¬¦ä¸²ä¸­ï¼Œè¢«æ’å…¥çš„å­—ç¬¦å°†æ˜¯ä¸‹ä¸€æ¡è¾“å…¥è¯­å¥è¯»å–åˆ°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦

## æ–‡ä»¶è¾“å…¥ä¸è¾“å‡º

åŒ…å«C++å¤´æ–‡ä»¶<fstream>

### æ–‡ä»¶çš„æ‰“å¼€ï¼š

#### è°ƒç”¨open()

```C++
ofstream fout;
fout.open("sdfkas.txt");
fout.close();
```

#### æ„é€ å‡½æ•°

```C++
ofstream fout("sdfa.txt");
```

ğŸ”¸ç”¨è¿™ç§æ–¹å¼æ¥è¾“å‡ºæ˜¯å¦‚æœæ²¡æœ‰è¿™æ ·çš„æ–‡ä»¶å°±åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰è¿™æ ·çš„å°†ä¼šæ¸…ç©ºæ–‡ä»¶ï¼Œå°†è¾“å‡ºè¿›å…¥åˆ°ä¸€ä¸ªç©ºæ–‡ä»¶ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹æŠŠæ–‡ä»¶è‡ªåŠ¨æˆªçŸ­ä¸º0ï¼Œç›¸å½“äºåˆ é™¤åŸæœ‰çš„å†…å®¹

ğŸ”¸c_str()å‡½æ•° ç”¨æŸä¸ªstringå¯¹è±¡è°ƒç”¨ï¼Œå¯ä»¥å°†stringè½¬æ¢ä¸ºcé£æ ¼å­—ç¬¦ä¸²

#### åˆ¤æ–­æ–‡ä»¶çš„æ‰“å¼€

1. is_open()ï¼šåˆ¤æ–­æ–‡ä»¶æ˜¯å¦æ‰“å¼€æˆåŠŸ

#### æ‰“å¼€å¤šä¸ªæ–‡ä»¶

å¯ä»¥æ‰“å¼€ä¸€ä¸ªæµï¼Œç„¶åå°†å®ƒä¾æ¬¡å…³è”åˆ°å„ä¸ªæ–‡ä»¶

### æ–‡ä»¶æ¨¡å¼

openï¼ˆï¼‰è¿˜å¯ä»¥æ¥æ”¶å¦å¤–ä¸€ä¸ªå‚æ•°ï¼Œåœ¨ios_baseç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªopenmode

| æ‰“å¼€æ–¹å¼    |            è§£é‡Š            |
| ----------- | :------------------------: |
| ios::in     |     ä¸ºè¯»æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶     |
| ios::out    |     ä¸ºå†™æ–‡ä»¶è€Œæ‰“å¼€æ–‡ä»¶     |
| ios::ate    |      åˆå§‹ä½ç½®ï¼šæ–‡ä»¶å°¾      |
| ios::app    |       è¿½åŠ æ–¹å¼å†™æ–‡ä»¶       |
| ios::trunc  | å¦‚æœæ–‡ä»¶å­˜åœ¨å…ˆåˆ é™¤ï¼Œåœ¨åˆ›å»º |
| ios::binary |         äºŒè¿›åˆ¶æ–¹å¼         |

ğŸ”¸å¯ä»¥é€šè¿‡  |  ç¬¦å·æ¥å®ç°æ‰“å¼€æ–¹å¼çš„ç»„åˆ

### *äºŒè¿›åˆ¶æ–‡ä»¶

åˆ©ç”¨write(),read()æ¥æ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› ä¸ºå®ƒæ­£å¥½æ˜¯é€šè¿‡å­—èŠ‚æ¥ä¼ è¾“çš„

```C++
#include<iostream>
#include<fstream>
#include<cstdlib>
inline void eatline() { while (std::cin.get() != '\n')continue; }
using namespace std;
typedef struct Person {
	int age;
	int height;
	char name[10];
}p;

void readData(const char* filename) {
	ifstream fin(filename, ios_base::in | ios_base::binary);
	if (!fin.is_open()) {
		cout << "error!!" << endl;
		exit(1);
	}
	p person;
	int num;
	while (fin.read((char*)&person, sizeof p)) {//è¿™é‡Œfin.read()è¿”å›ç±»å‹å¯ä»¥ç»ˆæ­¢å¾ªç¯ã€‚
	cout << person.name << "  " << person.age << "  " << person.height << endl;
	}
	fin.close();
}
void printData(const char* filename, p person) {//printDataåªèƒ½æ‰“å°ä¸€æ¬¡
	ofstream fout(filename, ios_base::app | ios_base::binary);
	if (!fout.is_open()) {
		cout << "error" << endl;
		exit(1);
	}
	fout.write((char*)&person, sizeof p);
	fout.close();
}
int main() {
	const char* ch = "joo.txt";
	p person1;
	person1.age = 10, person1.height = 176;
	strcpy_s(person1.name, "Johneey");
	printData(ch, person1);
	readData(ch);//è¿™ä¸ªå¯ä»¥è¯»å…¨éƒ¨
	return 0;
}
```

#### éšæœºè®¿é—®

å› ä¸ºè¦ä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥è¦ç”¨outè¾“å‡ºï¼ŒåŒæ—¶è¦æœ‰è¯»å…¥

```C++
fstream finout;
finout.open(file,ios_base::in|ios_base::out|ios_binary);
//è¿™æ ·å°±æ˜¯å£°æ˜ä¸€ä¸ªåŒå‘æµ
```

##### seekg()&&seekp()

1. ä½œç”¨ï¼šå°†è¾“å…¥æŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šçš„ä½ç½®ï¼Œç¬¬äºŒä¸ªæ˜¯å°†è¾“å‡ºæŒ‡é’ˆç§»åŠ¨åˆ°æŒ‡å®šçš„ä½ç½®å•ä½ï¼ˆå­—èŠ‚ï¼‰

   ```C++
   seekg(streamoff,ios_base::seekdir);//è¿™ä¸ªè¡¨ç¤ºç›¸å¯¹äºç¬¬äºŒä¸ªå‚æ•°çš„åç§»ä½ç½®
   fin.seekg(30,ios_base::beg);//ç¦»å¼€å§‹å‘å30ä¸ªå­—èŠ‚
   fin.seekg(-1,ios_base::cur);//å‘åç§»åŠ¨ä¸€ä¸ªå­—èŠ‚
   seekg(streampos);//è·ç¦»åˆå§‹ä½ç½®çš„è·ç¦»
   fin.seekg(0);//ç§»åŠ¨åˆ°å¼€å¤´
   ```

##### tellg()&&tellp()

1. ä½œç”¨è¿”å›å½“å‰æŒ‡é’ˆçš„ä½ç½®

éšæœºè®¿é—®çš„ç®—æ³•ï¼š
ä¸»è¦æ˜¯é€šè¿‡ä¸€ä¸ªstreamposå˜é‡æ¥è°ƒèŠ‚ä½ç½®ï¼Œå› ä¸ºä¸€ä¸ªç»“æ„ä½“çš„æ•°æ®æ˜¯ä¸€å—ä¸€å—çš„ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡è¿™ä¸ªè·³è¿‡

è¿˜æœ‰å°±æ˜¯é€šè¿‡ä¸€ä¸ªrecå˜é‡æ¥è®°å½•ç¬¬å‡ å—ï¼Œæ–¹ä¾¿èƒ½å¤Ÿç›¸ä¹˜rec*sizeofï¼ˆpï¼‰ã€‚è¿™ä¸ªrecæ˜¯é‡0å¼€å§‹çš„

```C++
void changeData(const char* filename) {
	fstream finout;
	finout.open(filename, ios::in | ios::out | ios::binary);
	if (!finout.is_open()) {
		cout << "error" << endl;
		exit(1);
	}
	p person0;
	int ct = 0;
	long rec ;
	while (finout.read((char*)&person0, sizeof p))
	{
		cout << ct++ << ": " << "   " << person0.name << "   " << person0.age << "   " << person0.height << endl;
	}
    //è¿™ä¸Šé¢éƒ½æ˜¯è¯»å–ä¿¡æ¯
	if (finout.eof()) {
		finout.clear();
	}//è¿™ä¸€æ­¥å¿…ä¸å¯å°‘ï¼Œå› ä¸ºä¸€è¾¹å·²ç»è¾¾åˆ°æ–‡ä»¶å°¾äº†æ‰€ä»¥å¿…é¡»è¦ä½¿ç”¨é‡æ–°è®¾ç½®eofbit
    
    //è¿™é‡Œæ¥åˆ›å»ºä½ç½®åç§»å˜é‡
	streampos place = rec * sizeof p;
	finout.seekg(place);
	finout.read((char*)&person0, sizeof p);
	cout << rec << ": " << "   " << person0.name << "   " << person0.age << "   " << person0.height << endl;
	if (finout.eof()) {
		finout.clear();
	}
	cout << "name:" << endl;
	cin >> person0.name;
	cout << "age:" << endl;
	cin >> person0.age;
	cout << "height" << endl;
	cin >> person0.height;
	finout.seekg(place);
	finout.write((char*)&person0, sizeof p) << flush;
	ct = 0;
	finout.seekg(0);
	cout << "here are the new contents." << endl;
	while (finout.read((char*)&person0,sizeof p))
	{
		cout << ct++ << ": " << "   " << person0.name << "   " << person0.age << "   " << person0.height << endl;
	}
	finout.close();
}
```

